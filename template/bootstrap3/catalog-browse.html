<div class="bin-catalog" ng-controller="ListCatalogPartitionsController as listCtrl"
     ng-init="listCtrl.init('ownedBy', catalogCtrl.path)">
    <div class="container">
        <div class="row">

            <!--Partitions-->
            <div class="col-xs-12 col-sm-4 col-md-3"
                 ng-if="listCtrl.partitions.length > 1 || catalogCtrl.parent != '/' || editing">
                <div class="list-group">
                    <a class="list-group-item" ng-if="::catalogCtrl.parent != '/'"
                       ng-href="#!{{::localePrefix}}/browse{{::catalogCtrl.parent}}">
                        <i class="fa fa-folder-o fa-fw"></i> ..
                    </a>
                    <a class="list-group-item" ng-repeat="partition in listCtrl.partitions track by partition.id"
                       ng-href="#!{{::localePrefix}}/browse{{::partition.id}}"
                       i18n code="{{::partition.id}}" default="{{::partition.name}}" read-only>
                        {{::var}}
                        <span class="pull-right">
                                <i class="fa fa-angle-right fa-fw"></i>
                            </span>
                    </a>

                    <ng-include src="'catalog-add-partition-form.html'"></ng-include>
                </div>
            </div>

            <div class="col-xs-12"
                 ng-class="{'col-sm-8 col-md-9': listCtrl.partitions.length > 1 || catalogCtrl.parent != '/'|| editing}">
                <div i18n code="{{::catalogCtrl.path}}.body" var="partitionBody" editor="full-media"
                     ng-show="var || editing">
                    <p ng-bind-html="var|trust"></p>
                    <hr>
                </div>

                <bin-catalog-spotlight type="catalogCtrl.head" partition="listCtrl.partition" partition-exact="true" size="12"></bin-catalog-spotlight>

                <div ng-controller="BinartaSearchController as searchCtrl" ng-init="searchCtrl.init({
                            entity:'catalog-item',
                            context:'search',
                            filters:{
                                type: catalogCtrl.head,
                                recursivelyByPartition: listCtrl.partition,
                                sortings: [
                                    {on:'partition', orientation:'asc'},
                                    {on:'priority', orientation:'desc'}
                                ]
                            },
                            includeCarouselItems: true,
                            autosearch:true,
                            noMoreResultsNotification: false,
                            subset:{count: 12}
                        })">
                    <div class="row">
                        <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
                            <ng-include src="'catalog-add-product-form.html'"></ng-include>
                        </div>
                    </div>

                    <bin-catalog-list-rows items="searchCtrl.results" partition="catalogCtrl.path" movable="true"></bin-catalog-list-rows>
                    <ng-include src="'search-for-more.html'"></ng-include>
                </div>
            </div>
        </div>
    </div>
</div>